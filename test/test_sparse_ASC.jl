include("./CombinationsOfSparsities.jl")
using .CombinationsOfSparsities

using DynamicPolynomials

@time begin
    eps=1e-2
    k=2 # relaxed order

    @polyvar x1 x2 x3 # variables
    x=[x1;x2;x3]

    g=[1-x1^2-x2^2]
    h=[x2*x3-1/2]



    I=Vector{Vector{UInt8}}(undef, 2)
    I[1]=[1;2]
    I[2]=[2;3]

    J=Vector{Vector{UInt8}}(undef, 2)
    J[1]=[1]
    J[2]=[]

    W=Vector{Vector{UInt8}}(undef, 2)
    W[1]=[]
    W[2]=[1]

    sol = CombinationsOfSparsities.sparse_ASC(x,g,h,I,J,W,eps,k)
end


"""
Determine L0:
------------------------------------
WARNING: replacing module CombinationsOfSparsities.

Termination status = OPTIMAL
Optimal value = 1.0623938452654818
====================================
Atom(I[1]):
====================================
Dimension of the null space of Gram matrix = 2
------------------------------------
atom 1 = [5.497788793111143e-13, -0.7021205450146037]
check lower bound  = 0
check inequality 1 = 0.5070267402683958
####################################
Solution = [5.497788793111143e-13, -0.7021205450146037]
####################################
------------------------------------
atom 2 = [3.1769513541543217e-13, 0.7021205450165449]
check lower bound  = 0
check inequality 1 = 0.5070267402656701
####################################
Solution = [3.1769513541543217e-13, 0.7021205450165449]
####################################
====================================
Atom(I[2]):
====================================
Dimension of the null space of Gram matrix = 4
------------------------------------
L0 = 1.0623938452654818
====================================
Determine omega0[1]:
------------------------------------
Termination status = OPTIMAL
Optimal value = 0.3518364689988381
====================================
Atom(I[1]):
====================================
Dimension of the null space of Gram matrix = 2
------------------------------------
atom 1 = [4.2240617221644676e-17, 0.59317590936128]
check lower bound  = 0
check inequality 1 = 0.6481423405534186
check inequality 2 = 0.7105361858189003
####################################
Solution = [4.2240617221644676e-17, 0.59317590936128]
####################################
------------------------------------
atom 2 = [1.1746513702143187e-17, -0.59317590936128]
check lower bound  = 0
check inequality 1 = 0.6481423405534186
check inequality 2 = 0.7105361858189003
####################################
Solution = [1.1746513702143187e-17, -0.59317590936128]
####################################
====================================
Atom(I[2]):
====================================
Dimension of the null space of Gram matrix = 2
------------------------------------
atom 1 = [0.5931933531103947, 0.842983574808188]
check lower bound  = 0
check inequality 1 = -0.00010581630526340646
check equality 1 = 5.2253357456288896e-5
####################################
Solution = [0.5931933531103947, 0.842983574808188]
####################################
------------------------------------
atom 2 = [-0.5931933531103951, -0.842983574808188]
check lower bound  = 0
check inequality 1 = -0.0001058163052640726
check equality 1 = 5.225335745662196e-5
####################################
Solution = [-0.5931933531103951, -0.842983574808188]
####################################
------------------------------------
omega0[1] = 0.35183647
====================================
 55.320263 seconds (10.77 M allocations: 27.574 GiB, 6.10% gc time)
2-element Array{Array{Float64,1},1}:
 [1.1746513702143187e-17, -0.59317590936128]
 [-0.5931933531103951, -0.842983574808188]         
"""